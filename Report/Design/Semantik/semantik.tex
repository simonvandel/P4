\section{Semantics}
This section describes the semmantics of the constructs in The Language Described in this Report both formally and informally. It is split into pieces each describing one construct both formally and informally.

\subsection{Formal semantics in The Language Described in this Report}
To describe the semantics formally it was decided to use small-step semantics. The alternative was big-step semantics but since the language depends heavily on non-determinism and parallelism and this is not possible to represent in big-step semantics, small-step semantic was a better choice.

The formal rules have three parts as illustrated in \cref{SM-semantics}

\begin{figure}[H]
\begin{align*}
&\inference[$RULE-NAME$]{[CONDITION]}
												{[CONCLUSSION]}
												{,[SIDE-EFFECTS]}
\end{align*}
\caption{A desription of formal small-step semantics}
\label{SM-semantics}
\end{figure}

The formal semantics will also use the environment-store model.

\subsection{Arithmetic Expressions}
\begin{align*}
&\inference[$\text{ADD}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash  a_1 + a_2 \Rightarrow_A a_1' + a_2}
&
&\inference[$\text{ADD}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
										{e,st \vdash a_2 + a_1 \Rightarrow_A a_2 + a_1'}
&
&\inference[$\text{ADD}_\text{V}$]{}
                    {v_1 + v_2 \Rightarrow_A v}
										{, v_1 + v_2 = v}
\\\\
&\inference[$\text{SUB}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_1 - a_2 \Rightarrow_A a_1' - a_2}
&
&\inference[$\text{SUB}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_2 - a_1 \Rightarrow_A a_2 - a_1'}
&
&\inference[$\text{SUB}_\text{V}$]{}
                    {v_1 - v_2 \Rightarrow_A v}
										{, v_1 - v_2 = v}
\\\\
&\inference[$\text{MULT}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                     {e,st \vdash a_1 * a_2 \Rightarrow_A a_1' * a_2}
&
&\inference[$\text{MULT}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                     {e,st \vdash a_2 * a_1 \Rightarrow_A a_2 * a_1'}
&
&\inference[$\text{MULT}_\text{V}$]{}
                     {v_1 * v_2 \Rightarrow_A v}
										 {, v_1 * v_2 = v}
\\\\
&\inference[$\text{DIV}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_1 / a_2 \Rightarrow_A a_1' / a_2}
&
&\inference[$\text{DIV}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_2 / a_1 \Rightarrow_A a_2 / a_1'}
&
&\inference[$\text{DIV}_\text{V}$]{}
                    {v_1 / v_2 \Rightarrow_A v}
										{, \frac{v_1}{v_2} = v}
\\\\
&\inference[$\text{MOD}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_1 \% a_2 \Rightarrow_A a_1' \% a_2}
&
&\inference[$\text{MOD}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_2 \% a_1 \Rightarrow_A a_2 \% a_1'}
&
&\inference[$\text{MOD}_\text{V}$]{}
                    {v_1 \% v_2 \Rightarrow_A v}
										{, v_1 \;\; \textrm{mod} \;\; v_2 = v}
\\\\
&\inference[$\text{POW}_\text{L}$]{e,st \vdash a_1  \Rightarrow_A a_1'}
                    {e,st \vdash a_1 \; ^\wedge{} \; a_2 \Rightarrow_A a_1' P a_2}
&
&\inference[$\text{POW}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_2 \; ^\wedge{} \; a_1 \Rightarrow_A a_2 P a_1'}
&
&\inference[$\text{POW}_\text{V}$]{}
                    {v_1 \; ^\wedge{} \; v_2 \Rightarrow_A v}
										{, v_1 ^ {v_2} = v}
\\\\
&\inference[$\text{ROOT}_\text{L}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_1 \# a_2 \Rightarrow_A a_1' \# a_2}
&
&\inference[$\text{ROOT}_\text{R}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                    {e,st \vdash a_2 \# a_1 \Rightarrow_A a_2 \# a_1'}
&
&\inference[$\text{ROOT}_\text{V}$]{}
                    {v_1 \# v_2 \Rightarrow_A v}
										{, \sqrt[v_1]{v_2} = v}
\\\\
&\inference[$\text{PARENS}_\text{A}$]{e,st \vdash a_1 \Rightarrow_A a_1'}
                       {e,st \vdash (a_1) \Rightarrow_A (a_1')}
&
&\inference[$\text{PARENS}_\text{V}$]{}
                       {(v) \Rightarrow_A v}
&
&\inference[$NUM$]{}
                  {e,st \vdash n \Rightarrow_A v}
									{, \mathbb{N}(n) = v}
\end{align*}

\subsection{Boolean Expressions}
\newcommand{\Tand}{\mathbin{\text{AND}}}
\newcommand{\Tnot}{\mathbin{\text{NOT}}}
\newcommand{\Tnand}{\mathbin{\text{NAND}}}
\newcommand{\Tor}{\mathbin{\text{OR}}}
\newcommand{\Tnor}{\mathbin{\text{NOR}}}
\newcommand{\Txor}{\mathbin{\text{XOR}}}

\begin{align*}
&\inference[$\text{NOT}_\top$]{e,st \vdash b_1 \Rightarrow_B \top}
                       {e,st \vdash \Tnot b_1 \Rightarrow_B \bot}
\\\\
&\inference[$\text{AND}_1$]{e,st \vdash b_1 \Rightarrow_B \bot}
                    {e,st \vdash b_1 \Tand b_2 \Rightarrow_B \bot}
\\\\
&\inference[$\text{AND}_2$]{e,st \vdash b_1 \Rightarrow_B \top \\ b_2 \Rightarrow_B \bot}
								    {e,st \vdash b_1 \Tand b_2 \Rightarrow_B \bot}
\\\\
&\inference[$\text{AND}_3$]{e,st \vdash b_1 \Rightarrow_B \top \\ b_2 \Rightarrow_B \top}
								    {e,st \vdash b_1 \Tand b_2 \Rightarrow_B \top}
\\\\
&\inference[NAND]{}
								   {e,st \vdash b_1 \Tnand b_2 \Rightarrow_B \Tnot( b_1 \Tand b_2 )}
\\\\
&\inference[OR]{}
                 {e,st \vdash b_1 \Tor b_2 \Rightarrow_B \Tnot(\Tnot b_1 \Tand \Tnot b_2)}
\\\\
&\inference[NOR]{}
								   {e,st \vdash b_1 \Tnor b_2 \Rightarrow_B \Tnot( b_1 \;\; \textrm{OR} \;\; b_2 )}
\\\\
&\inference[XOR]{}
                  {e,st \vdash b_1 \Txor b_2 \Rightarrow_B (\Tnot(b_1 \Tand b_2)) \Tand (b_1 \Tor b_2)}
\\\\
&\inference[$\text{PARENS}_\text{B}$]{e,st \vdash b_1 \Rightarrow_B b_1'}
                       {e,st \vdash (b_1) \Rightarrow_B (b_1')}
\end{align*}

\subsection{Statements}
\newcommand{\Tlet}{\text{let}}
\subsubsection{General}
\begin{align*}
&\inference[$\text{DECL}$]{}
                         {\Braket{\Tlet x := a,e,st} \Rightarrow_S \Braket{x := a, e',st}}
												{, l = e(next), e' = e[x\mapsto l, next\mapsto new(l)]}
\\\\
&\inference[$\text{ASS}$]{e,st \vdash a \Rightarrow_A v}
                         {\Braket{x := a,e,st} \Rightarrow_S \Braket{e,st'}}
												{, l = e(x), st' = st[l\mapsto v]}
\\\\
&\inference[$\text{STATEMENTS}_1$]{\Braket{S_1,e,st} \Rightarrow_S \Braket{S_1',e',st'}}
                         {\Braket{S_1;S_2,e,st} \Rightarrow_S \Braket{S_1';S_2,e',st'}}
\\\\
&\inference[$\text{STATEMENTS}_2$]{\Braket{S_1,e,st} \Rightarrow_S \Braket{e',st'}}
                         {\Braket{S_1;S_2,e,st} \Rightarrow_S \Braket{S_2,e',st'}}
\\\\
&\inference[$\text{BLOCK}_1$]{\Braket{S,e,st} \Rightarrow_S \Braket{S',e',st'}}
                         {\Braket{\{S\},e,st} \Rightarrow_S \Braket{\{S'\},e',st'}}
\\\\
&\inference[$\text{BLOCK}_1$]{\Braket{S,e,st} \Rightarrow_S \Braket{e',st'}}
                         {\Braket{\{S\},e,st} \Rightarrow_S \Braket{e',st'}}
\end{align*}

\subsubsection{Conditional}
\newcommand{\Tif}{\text{if}}
\newcommand{\Telse}{\text{else}}

\begin{align*}
&\inference[$\text{IF}_\top$]{b \Rightarrow_B \top}
                      {\Braket{if(b)\{S\},e,st} \Rightarrow_S \Braket{\{S\},e,st}}
\\\\
&\inference[$\text{IF}_\bot$]{b \Rightarrow_B \bot}
                      {\Braket{if(b)\{S\},e,st} \Rightarrow_S \Braket{e,st}}
\\\\
&\inference[$\text{IF-ELSE}_\top$]{b \Rightarrow_B \top}
                      {\Braket{if(b)\{S_1\}else\{S_2\},e,st} \Rightarrow_S \Braket{\{S_1\},e,st}}
\\\\
&\inference[$\text{IF-ELSE}_\bot$]{b \Rightarrow_B \bot}
                      {\Braket{if(b)\{S_1\}else\{S_2\},e,st} \Rightarrow_S \Braket{\{S_2\},e,st}}
\end{align*}
\subsubsection{Loop}
\newcommand{\Tfor}{\mathbin{\text{for}}}
\newcommand{\Tx}{\mathbin{\text{x}}}
\newcommand{\Tin}{\mathbin{\text{in}}}
\newcommand{\Twhile}{\mathbin{\text{while}}}

\begin{align*}
&\inference[$\text{WHILE}_\top$]{e,st \vdash b \Rightarrow_B \top}
                       {\Braket{\Twhile(b)\{S\},e,st} \Rightarrow_S \Braket{\{S\}; \Twhile (b)\{S\},e,st}}
\\\\
&\inference[$\text{WHILE}_\bot$]{e,st \vdash b \Rightarrow_B \bot}
                       {\Braket{\Twhile(b)\{S\},e,st} \Rightarrow_S \Braket{e,st}}
\\\\
&\inference[$\text{FOR}_1$]{}
                       {\Braket{\Tfor \Tx \Tin [n_1,\dots,n_m]\{S\},e,st} \Rightarrow_S \Braket{\Tfor \mathbin{\text{x}} \mathbin{\text{in}} [n_1,\dots,n_m]\{S\},e',st}}
\\
&\mathbin{\text{where}} l = e(next), e' = e[x\mapsto l,next\mapsto new(l)]
\\\\
&\inference[$\text{FOR}_2$]{}
                       {\Braket{\Tfor \Tx \Tin [n_1,\dots,n_m]\{S\},e,st} \Rightarrow_S \Braket{\{S\}; \Tfor \mathbin{\text{x}} \mathbin{\text{in}} [n_2,\dots,n_m]\{S\},e,s[l\mapsto v_1]}}
\\
&\mathbin{\text{where}} e,st \vdash n_1 \Rightarrow_A v_1,e(x)=l
\\\\
&\inference[$\text{FOR}_3$]{}
                       {\Braket{\Tfor \mathbin{\text{x}} \mathbin{\text{in}} [n_m]\{S\},e,s} \Rightarrow_S \Braket{\{S\},e,s[l\mapsto v_m]}}
\\
&\mathbin{\text{where}} e,st \vdash n_m \Rightarrow_A v_m,e(x)=l
\end{align*}

\subsubsection{Misc}
\newcommand{\Tspawn}{\mathbin{\text{spawn}}}
\newcommand{\Tsend}{\mathbin{\text{send}}}
\begin{align*}
&\inference[$\text{SPAWN}$]{}
                       {\Braket{\Tspawn \Tx m,e,st} \Rightarrow_S \Braket{\Tsend \Tx m,e',st}}
												{, l = e(next), e' = e[x\mapsto l, next\mapsto new(l)]}
\\\\
&\inference[$\text{SEND}_1$]{\Braket{S,e,st} \Rightarrow_S \Braket{S',e',st'}}
                       {\Braket{\Tsend \Tx m ; S',e,st} \Rightarrow_S \Braket{\Tsend \Tx m,e',st}}
\\\\
&\inference[$\text{SEND}_2$]{\Braket{S,e,st} \Rightarrow_S \Braket{e',st'}}
                       {\Braket{\Tsend \Tx m,e,st} \Rightarrow_S \Braket{\Tsend \Tx m,e',st}}
\\\\
&\inference[$\text{SEND}_3$]{}
                       {\Braket{\Tsend \Tx m ; S',e,st} \Rightarrow_S \Braket{\Tx.m(m),e',st}}
\end{align*}